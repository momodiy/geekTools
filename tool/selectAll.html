<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<script src="http://code.jquery.com/jquery-2.1.1.min.js"></script>
<body>
<p><input type="checkbox" id="select_all" onchange="selectAll()">全选框</p>
<p>
    <input type="checkbox" class="index">选项一
</p>
<p>
    <input type="checkbox" class="index">选项二
</p>
<p>
    <input type="checkbox" class="index">选项三
</p>
<p>
    <input type="checkbox" class="index">选项四
</p>
<p>
    <input type="checkbox" class="index">选项五
</p>

<script>
    /*
    * 当全选按钮状态改变时，将全选按钮的选中状态赋值给列表每一项
    * */
    const selectAll = () => Array.from($('.index')).map(v => v.checked = $('#select_all')[0].checked);

    /*
    * 当选择列表的某一项改变时，遍历该列表的每一项。
    * 当该列表每一项的选中状态都为选中，将全选按钮的状态变为选中，否则将全选按钮的选中状态变为未选中
    * */
    $('input.index').on('change', () => {
        $('#select_all')[0].checked = Array.from($('.index')).every(v => $(v).is(":checked"))
    })
</script>

</body>
</html>